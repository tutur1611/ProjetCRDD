<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link href="./bootstrap-5.3.3-dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      padding-top: 70px; /* Ajustez cette valeur en fonction de la hauteur de votre header */
      padding-bottom: 70px; /* Ajustez cette valeur en fonction de la hauteur de votre footer */
    }
    header, footer {
      background-color: #6c757d; 
      width: 100%;
      padding: 10px 0;
      color: white; 
    }
    .content {
      margin-top: 20px;
    }
    .left-column, .right-column {
      padding: 20px;
      background-color: #343a40; 
      color: white; 
      border-radius: 5px;
    }
  </style>
</head>
<body>
  <header class="header fixed-top d-flex justify-content-center align-items-center">
    <h3 class="text-decoration-underline p-2">PROJET CRDD</h3>
  </header>


  <div class="container content">
    <div class="row justify-content-center border border-primary">
      <div class="col-md-5 left-column me-3" style="height:auto;">
        <form>
          <div class="mb-3">
            <label for="figures" class="form-label">Combien de figures souhaitez-vous ?</label>
            <select class="form-select" id="figures" name="figures">
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5</option>
              <option value="6">6</option>
              <option value="7">7</option>
              <option value="8">8</option>
              <option value="9">9</option>
              <option value="10">10</option>
            </select>
          </div>
        </form>
      </div>
      <div class="col-md-5 right-column w-50">
        <form id="dynamic-form">
        </form>
      </div>
    </div>
    <button id="generer_graph" class="btn btn-primary mt-3">Génerer la reprise de dressage.</button>
  </div>

  <footer class="footer fixed-bottom d-flex justify-content-center align-items-center">
    <p class="m-0">FOOTER</p>
  </footer>

  <script src="../bootstrap-5.3.3-dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // document.getElementById("generer_graph").addEventListener("click", function () {
    //   const figuresDropdown = document.getElementById("figures");
    //   const numberOfFigures = parseInt(figuresDropdown.value, 10);
    //   const figures = [];

    //   for (let i = 1; i <= numberOfFigures; i++) {
    //     const type = document.getElementById(`figure-${i}`).value;
    //     const start = document.getElementById(`depart-${i}`).value;
    //     const end = document.getElementById(`arrive-${i}`).value;

    //     figures.push({
    //       type: type,
    //       start: start,
    //       end: end
    //     });
    //   }

    //   fetch("/generer_graph", {
    //     method: "POST",
    //     headers: {
    //       "content-type": "application/json"
    //     },
    //     body: JSON.stringify({ figures: figures})
    //   })
    //   .then(response => {
    //     if (!response.ok) {
    //       throw new Error("Erreur lors de la génération de la reprise de dressage");
    //     }
    //     return response.blob();
    //   })
    //   .then(blob => {
    //     const img = document.createElement("img");
    //     img.src = URL.createObjectURL(blob);
    //     const plotContainer = document.getElementById("plot-container");
    //     plotContainer.innetHTML = "";
    //     plotContainer.appendChild(ing);
    //   })
    //   .catch(error => {
    //     console.error("Erreur :", error);
    //     alert("Une erreur est survenue lors de la génération de la reprise de dressage.")
    //   })
    // })

    document.addEventListener("DOMContentLoaded", function () {
      const figuresDropdown = document.getElementById("figures");
      const dynamicForm = document.getElementById("dynamic-form");

      function createSelectionBlock(index) {
        return `
          <div class="d-flex align-items-center mb-3">
            <!-- Dropdown pour les figures -->
            <div class="me-3">
              <label for="figure-${index}" class="form-label">Figure ${index} :</label>
              <select class="form-select" id="figure-${index}" name="figure-${index}">
                <option value="none">Sélectionnez une figure...</option>
                <option value="Doubler">Doubler</option>
                <option value="Diagonale">Diagonale</option>
                <option value="Petite Volte">Petite Volte</option>
                <option value="Volte">Volte</option>
              </select>
            </div>

            <!-- Dropdown pour la lettre de départ -->
            <div class="me-3">
              <label for="depart-${index}" class="form-label">Lettre de départ :</label>
              <select class="form-select" id="depart-${index}" name="depart-${index}">
                <option value="1">Sélectionnez une lettre de départ...</option>
                <option value="C">C</option>
                <option value="M">M</option>
                <option value="R">R</option>
                <option value="B">B</option>
                <option value="P">P</option>
                <option value="F">F</option>
                <option value="A">A</option>
                <option value="K">K</option>
                <option value="V">V</option>
                <option value="E">E</option>
                <option value="S">S</option>
                <option value="H">H</option>
              </select>
            </div>

            <!-- Dropdown pour la lettre d'arrivée -->
            <div class="me-3">
              <label for="arrive-${index}" class="form-label">Lettre d'arrivée :</label>
              <select class="form-select" id="arrive-${index}" name="arrive-${index}">
                <option value="1">Sélectionnez une lettre d'arrivée...</option>
                <option value="C">C</option>
                <option value="M">M</option>
                <option value="R">R</option>
                <option value="B">B</option>
                <option value="P">P</option>
                <option value="F">F</option>
                <option value="A">A</option>
                <option value="K">K</option>
                <option value="V">V</option>
                <option value="E">E</option>
                <option value="S">S</option>
                <option value="H">H</option>
              </select>
            </div>
          </div>
        `;
      }

      // Écouteur pour détecter les changements dans le dropdown
      figuresDropdown.addEventListener("change", function () {
        const numberOfFigures = parseInt(figuresDropdown.value, 10);
        dynamicForm.innerHTML = ""; // Réinitialise le formulaire dynamique

        // Génère les blocs dynamiques
        for (let i = 1; i <= numberOfFigures; i++) {
          dynamicForm.innerHTML += createSelectionBlock(i);
        }
      });

      // Déclenche un événement de changement initial pour générer le premier bloc
      figuresDropdown.dispatchEvent(new Event("change"));
    });
  </script>
</body>
</html>